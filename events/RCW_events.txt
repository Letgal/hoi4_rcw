add_namespace = russian_civil_war

country_event = {
	id = russian_civil_war.1
	title = russian_civil_war.1.t
	desc = russian_civil_war.1.d
	picture = GFX_report_event_generic_riot

	fire_only_once = yes

	trigger = {
		NOT = { has_global_flag = RCW_ongoing }
		tag = RUS
		has_government = communism
	}
	mean_time_to_happen = { days = 3 }

	immediate = {
		hidden_effect = {
			if = {
				limit = { has_dlc = "By Blood Alone" }
				remove_power_balance = { id = PRO_balance_of_power }
			}
			else = {
				remove_ideas = {
					PRO_petrograd_soviet_passive
					PRO_petrograd_soviet_domineering
					PRO_petrograd_soviet_weakened
				}
			}
			remove_dynamic_modifier = { modifier = PRO_failing_state }
			remove_dynamic_modifier = { modifier = war_weariness }
			release = FIN
			78 = {
				transfer_state_to = MOL
				add_claim_by = RUS
			}
			766 = {
				transfer_state_to = MOL
				add_claim_by = RUS
			}
		}
	}

	option = {
		name = russian_civil_war.1.a
		start_civil_war = {
			ruling_party = neutrality
			ideology = communism
			size = 0.4
			capital = 195
			states = all
			states_filter = { region = 132 }
			hidden_effect = {
				PREV = {
					#set_capital = 219
					RUS_vladimir_lenin = { set_nationality = PREV.PREV }
					set_cosmetic_tag = RUS_white
					load_focus_tree = white_russia_focus
					set_party_name = {
						ideology = neutrality
						name = RUS_white_movement
						long_name = RUS_white_movement
					}
					add_ideas = {
						WHI_factionalism
						communism_banned
					}
				}
				set_cosmetic_tag = RUS_soviet
				remove_ideas = provisional_government_idea
				load_focus_tree = soviet_russia_focus
				add_ideas = {
					unrecognized_state
					SOV_empty_government
					communist_fervor
				}
				if = {
					limit = { has_war_with = GER }
					set_truce = {
						target = GER
						days = 60
					}
				}
			}
		}
	}
}

country_event = {
	id = russian_civil_war.2
	title = russian_civil_war.2.t
	desc = russian_civil_war.2.d
	picture = GFX_report_event_generic_riot

	fire_only_once = yes

	trigger = {
		has_global_flag = RCW_ongoing
		OR = {
			original_tag = RUS
			original_tag = SOV
		}
		UKR = {
			exists = no
			NOT = {
				has_war_with_wargoal_against = {
					target = RUS
					type = independence_wargoal
				}
			}
		}
	}

	mean_time_to_happen = { days = 60 }

	immediate = {
		hidden_effect = {
			202 = { transfer_state_to = UKR }
			203 = { transfer_state_to = UKR }
		}
	}

	option = {
		name = russian_civil_war.2.a
		hidden_effect = {
			UKR = {
				declare_war_on = {
					target = RUS
					type = independence_wargoal
				}
				declare_war_on = {
					target = SOV
					type = independence_wargoal
				}
			}
		}
		UKR = { custom_effect_tooltip = country_declares_independence_capital }
	}
	option = {
		name = russian_civil_war.2.b
		hidden_effect = {
			UKR = {
				declare_war_on = {
					target = RUS
					type = independence_wargoal
				}
				declare_war_on = {
					target = SOV
					type = independence_wargoal
				}
			}
		}
		UKR = {
			custom_effect_tooltip = country_declares_independence_capital
			change_tag_from = ROOT
		}
	}
}

country_event = {
	id = russian_civil_war.3
	title = russian_civil_war.3.t
	desc = russian_civil_war.3.d
	picture = GFX_report_event_generic_riot

	fire_only_once = yes

	trigger = {
		has_global_flag = RCW_ongoing
		OR = {
			original_tag = RUS
			original_tag = SOV
		}
		KAZ = {
			exists = no
			NOT = {
				has_war_with_wargoal_against = {
					target = RUS
					type = independence_wargoal
				}
			}
		}
	}

	mean_time_to_happen = { days = 60 }

	immediate = {
		hidden_effect = {
			588 = { transfer_state_to = KAZ }
			882 = { transfer_state_to = KAZ }
		}
	}

	option = {
		name = russian_civil_war.2.a
		hidden_effect = {
			KAZ = {
				declare_war_on = {
					target = RUS
					type = independence_wargoal
				}
				declare_war_on = {
					target = SOV
					type = independence_wargoal
				}
			}
		}
		KAZ = { custom_effect_tooltip = country_declares_independence_capital }
	}
	option = {
		name = russian_civil_war.3.b
		hidden_effect = {
			KAZ = {
				declare_war_on = {
					target = RUS
					type = independence_wargoal
				}
				declare_war_on = {
					target = SOV
					type = independence_wargoal
				}
			}
		}
		KAZ = {
			custom_effect_tooltip = country_declares_independence_capital
			change_tag_from = ROOT
		}
	}
}

### WAR CONQUESTS ###
country_event = {
	id = russian_civil_war.101 # Reclamation of Warszawa
	title = russian_civil_war.101.t
	desc = russian_civil_war.101.d
	picture = GFX_report_event_generic_conference

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = russian_civil_war.101.a
		add_to_variable = { war_weariness_ws = 0.15 }
		custom_effect_tooltip = war_weariness_ws_15
	}
}

country_event = {
	id = russian_civil_war.102 # Capture of Königsberg
	title = russian_civil_war.102.t
	desc = russian_civil_war.102.d
	picture = GFX_report_event_generic_conference

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = russian_civil_war.101.a
		add_to_variable = { war_weariness_ws = 0.15 }
		custom_effect_tooltip = war_weariness_ws_15
	}
}

country_event = {
	id = russian_civil_war.103 # Second Capture of Lemberg
	title = russian_civil_war.103.t
	desc = russian_civil_war.103.d
	picture = GFX_report_event_generic_conference

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = russian_civil_war.101.a
		add_to_variable = { war_weariness_ws = 0.15 }
		custom_effect_tooltip = war_weariness_ws_15
	}
}

country_event = {
	id = russian_civil_war.104 # Capture of Krakau
	title = russian_civil_war.104.t
	desc = russian_civil_war.104.d
	picture = GFX_report_event_generic_conference

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = russian_civil_war.101.a
		add_to_variable = { war_weariness_ws = 0.15 }
		custom_effect_tooltip = war_weariness_ws_15
	}
}

#news_event = {
#	id = russian_civil_war.103 # Reclamation of Warszawa (News)
#	title = russian_civil_war.103.t
#	desc = russian_civil_war.103.d
#	picture = GFX_report_event_generic_conference
#
#	fire_only_once = yes
#	is_triggered_only = yes
#
#	option = { name = russian_civil_war.103.a }
#}

#news_event = {
#	id = russian_civil_war.104 # Capture of Königsberg (News)
#	title = russian_civil_war.104.t
#	desc = russian_civil_war.104.d
#	picture = GFX_report_event_generic_conference
#
#	fire_only_once = yes
#	is_triggered_only = yes
#
#	option = { name = russian_civil_war.104.a }
#}